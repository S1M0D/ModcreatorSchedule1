<Window x:Class="Schedule1ModdingTool.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="700" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{StaticResource DarkBackgroundBrush}"
        Foreground="{StaticResource LightTextBrush}"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        RenderOptions.BitmapScalingMode="HighQuality"
        RenderOptions.ClearTypeHint="Enabled"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType">
	<Border Margin="10"
	        Background="{StaticResource DarkPanelBrush}"
	        BorderBrush="{StaticResource DarkBorderBrush}"
	        BorderThickness="1"
	        CornerRadius="6"
	        Padding="15">
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<TextBlock Grid.Row="0" Text="Mod Generation Settings" FontSize="16" FontWeight="Bold" Margin="0,0,0,10" />

			<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Padding="0,0,5,0">
				<StackPanel Orientation="Vertical">
				<GroupBox Header="Workspace" Margin="0,0,0,8">
					<StackPanel Margin="5">
						<TextBlock Text="Default Workspace Path:" Margin="0,0,0,5" />
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0" Text="{Binding Settings.WorkspacePath, UpdateSourceTrigger=PropertyChanged}"
							         Margin="0,0,5,0" />
							<Button Grid.Column="1" Content="Browse..." Command="{Binding BrowseWorkspacePathCommand}" Padding="10,0" />
						</Grid>
					</StackPanel>
				</GroupBox>

				<GroupBox Header="Game Installation" Margin="0,0,0,8">
					<StackPanel Margin="5">
						<TextBlock Text="Game Install Path (optional, for auto-deploy):" Margin="0,0,0,5" />
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0" Text="{Binding Settings.GameInstallPath, UpdateSourceTrigger=PropertyChanged}"
							         Margin="0,0,5,0" />
							<Button Grid.Column="1" Content="Browse..." Command="{Binding BrowseGamePathCommand}" Padding="10,0" />
						</Grid>
					</StackPanel>
				</GroupBox>

				<GroupBox Header="S1API Reference" Margin="0,0,0,8">
					<StackPanel Margin="5">
						<TextBlock Text="Custom S1API.dll (optional, overrides NuGet package):" Margin="0,0,0,5" />
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0"
							         Text="{Binding Settings.S1ApiDllPath, UpdateSourceTrigger=PropertyChanged}"
							         Margin="0,0,5,0" />
							<Button Grid.Column="1"
							        Content="Browse..."
							        Command="{Binding BrowseS1ApiDllCommand}"
							        Padding="10,0" />
						</Grid>
						<TextBlock Margin="0,8,0,0"
						           Text="Leave blank to continue using the latest S1API.Forked NuGet package."
						           TextWrapping="Wrap"
						           Foreground="{StaticResource DimTextBrush}"
						           FontSize="11" />
					</StackPanel>
				</GroupBox>

				<GroupBox Header="User Preferences" Margin="0,0,0,8">
					<StackPanel Margin="5">
						<TextBlock Text="Coding Experience Level:" Margin="0,0,0,10" />
						<StackPanel>
							<RadioButton Content="No coding experience" 
							             IsChecked="{Binding Settings.ExperienceLevel, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=NoCodingExperience}"
							             Margin="0,5"
							             GroupName="ExperienceLevel" />
							<RadioButton Content="Some coding experience" 
							             IsChecked="{Binding Settings.ExperienceLevel, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=SomeCoding}"
							             Margin="0,5"
							             GroupName="ExperienceLevel" />
							<RadioButton Content="Experienced coder" 
							             IsChecked="{Binding Settings.ExperienceLevel, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=ExperiencedCoder}"
							             Margin="0,5"
							             GroupName="ExperienceLevel" />
						</StackPanel>
						<TextBlock Text="This affects whether the code view is shown by default." 
						           Margin="0,10,0,0"
						           Foreground="{StaticResource DimTextBrush}"
						           FontSize="11"
						           TextWrapping="Wrap" />
						
						<Grid Margin="0,15,0,0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="Undo History Size:" VerticalAlignment="Center" Margin="0,0,10,0" />
							<Slider Grid.Column="1" 
							        Minimum="1" 
							        Maximum="50" 
							        TickFrequency="1" 
							        IsSnapToTickEnabled="True"
							        Value="{Binding Settings.UndoHistorySize, UpdateSourceTrigger=PropertyChanged}"
							        VerticalAlignment="Center"
							        Margin="0,0,10,0" />
							<TextBlock Grid.Column="2" 
							           Text="{Binding Settings.UndoHistorySize, StringFormat='{}{0} steps'}" 
							           VerticalAlignment="Center"
							           MinWidth="60" />
						</Grid>
						<TextBlock Text="Number of undo/redo steps to keep in history (1-50). Default: 5." 
						           Margin="0,5,0,0"
						           Foreground="{StaticResource DimTextBrush}"
						           FontSize="11"
						           TextWrapping="Wrap" />
					</StackPanel>
				</GroupBox>

				<GroupBox Header="Default Mod Settings">
					<StackPanel Margin="5">
						<Grid Margin="0,0,0,5">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="Default Namespace:" VerticalAlignment="Center" Margin="0,0,10,0" />
							<TextBox Grid.Column="1" Text="{Binding Settings.DefaultModNamespace, UpdateSourceTrigger=PropertyChanged}" />
						</Grid>
						<Grid Margin="0,0,0,5">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="Default Author:" VerticalAlignment="Center" Margin="0,0,10,0" />
							<TextBox Grid.Column="1" Text="{Binding Settings.DefaultModAuthor, UpdateSourceTrigger=PropertyChanged}" />
						</Grid>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="Default Version:" VerticalAlignment="Center" Margin="0,0,10,0" />
							<TextBox Grid.Column="1" Text="{Binding Settings.DefaultModVersion, UpdateSourceTrigger=PropertyChanged}" />
						</Grid>
					</StackPanel>
				</GroupBox>
				</StackPanel>
			</ScrollViewer>

			<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
				<Button Content="Save" Command="{Binding SaveCommand}" Padding="15,5" Margin="0,0,10,0" MinWidth="75" />
				<Button Content="Cancel" Command="{Binding CancelCommand}" Padding="15,5" MinWidth="75" />
			</StackPanel>
		</Grid>
	</Border>
</Window>
